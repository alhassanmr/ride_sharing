"use strict";(self.webpackChunkangular_16_jwt_auth=self.webpackChunkangular_16_jwt_auth||[]).push([[979],{8979:(k,u,g)=>{g.r(u),g.d(u,{AuthLayoutModule:()=>K});var d=g(4755),m=g(7738),e=g(3020),p=g(8368),f=g(3897),a=g(5030);function v(n,o){1&n&&(e.TgZ(0,"div",17),e._uU(1," Username is required! "),e.qZA())}function x(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function h(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Password must be at least 3 characters "),e.qZA())}function C(n,o){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,x,2,0,"div",18),e.YNc(2,h,2,0,"div",18),e.qZA()),2&n){e.oxw();const t=e.MAs(12);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function Z(n,o){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" Login failed: ",t.errorMessage," ")}}const _=function(n){return{"is-invalid":n}};function M(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(1),r=e.oxw();return e.KtG(i.form.valid&&r.onSubmit())}),e.TgZ(2,"div",7)(3,"label",8),e._uU(4,"Username"),e.qZA(),e.TgZ(5,"input",9,10),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.form.username=i)}),e.qZA(),e.YNc(7,v,2,0,"div",11),e.qZA(),e.TgZ(8,"div",7)(9,"label",12),e._uU(10,"Password"),e.qZA(),e.TgZ(11,"input",13,14),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.form.password=i)}),e.qZA(),e.YNc(13,C,3,2,"div",11),e.qZA(),e.TgZ(14,"div",7)(15,"button",15),e._uU(16,"Login"),e.qZA()(),e.TgZ(17,"div",7),e.YNc(18,Z,2,1,"div",16),e.qZA()()}if(2&n){const t=e.MAs(1),s=e.MAs(6),i=e.MAs(12),r=e.oxw();e.xp6(5),e.Q6J("ngModel",r.form.username)("ngClass",e.VKq(7,_,t.submitted&&s.errors)),e.xp6(2),e.Q6J("ngIf",s.errors&&t.submitted),e.xp6(4),e.Q6J("ngModel",r.form.password)("ngClass",e.VKq(9,_,t.submitted&&i.errors)),e.xp6(2),e.Q6J("ngIf",i.errors&&t.submitted),e.xp6(5),e.Q6J("ngIf",t.submitted&&r.isLoginFailed)}}function T(n,o){if(1&n&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" Logged in as ",t.roles,". ")}}function A(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Username is required"),e.qZA())}function q(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Username must be at least 3 characters "),e.qZA())}function w(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Username must be at most 20 characters "),e.qZA())}function J(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,A,2,0,"div",21),e.YNc(2,q,2,0,"div",21),e.YNc(3,w,2,0,"div",21),e.qZA()),2&n){e.oxw();const t=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.errors.maxlength)}}function U(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function I(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Email must be a valid email address "),e.qZA())}function S(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,U,2,0,"div",21),e.YNc(2,I,2,0,"div",21),e.qZA()),2&n){e.oxw();const t=e.MAs(12);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.email)}}function L(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function R(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Password must be at least 3 characters "),e.qZA())}function y(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,L,2,0,"div",21),e.YNc(2,R,2,0,"div",21),e.qZA()),2&n){e.oxw();const t=e.MAs(18);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function N(n,o){if(1&n&&(e.TgZ(0,"div",22),e._uU(1," Signup failed!"),e._UZ(2,"br"),e._uU(3),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij("",t.errorMessage," ")}}const c=function(n){return{"is-invalid":n}};function Q(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(1),r=e.oxw();return e.KtG(i.form.valid&&r.onSubmit())}),e.TgZ(2,"div",7)(3,"label",8),e._uU(4,"Username"),e.qZA(),e.TgZ(5,"input",9,10),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.form.username=i)}),e.qZA(),e.YNc(7,J,4,3,"div",11),e.qZA(),e.TgZ(8,"div",7)(9,"label",12),e._uU(10,"Email"),e.qZA(),e.TgZ(11,"input",13,14),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.form.email=i)}),e.qZA(),e.YNc(13,S,3,2,"div",11),e.qZA(),e.TgZ(14,"div",7)(15,"label",15),e._uU(16,"Password"),e.qZA(),e.TgZ(17,"input",16,17),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.form.password=i)}),e.qZA(),e.YNc(19,y,3,2,"div",11),e.qZA(),e.TgZ(20,"div",7)(21,"button",18),e._uU(22,"Sign Up"),e.qZA()(),e.YNc(23,N,4,1,"div",19),e.qZA()}if(2&n){const t=e.MAs(1),s=e.MAs(6),i=e.MAs(12),r=e.MAs(18),l=e.oxw();e.xp6(5),e.Q6J("ngModel",l.form.username)("ngClass",e.VKq(10,c,t.submitted&&s.errors)),e.xp6(2),e.Q6J("ngIf",s.errors&&t.submitted),e.xp6(4),e.Q6J("ngModel",l.form.email)("ngClass",e.VKq(12,c,t.submitted&&i.errors)),e.xp6(2),e.Q6J("ngIf",i.errors&&t.submitted),e.xp6(4),e.Q6J("ngModel",l.form.password)("ngClass",e.VKq(14,c,t.submitted&&r.errors)),e.xp6(2),e.Q6J("ngIf",r.errors&&t.submitted),e.xp6(4),e.Q6J("ngIf",t.submitted&&l.isSignUpFailed)}}function Y(n,o){1&n&&(e.TgZ(0,"div",23),e._uU(1," Your registration is successful! "),e.qZA())}const F=[{path:"login",component:(()=>{class n{constructor(t,s,i){this.authService=t,this.storageService=s,this.router=i,this.form={username:null,password:null,roleType:null},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=""}ngOnInit(){this.storageService.isLoggedIn()&&(this.isLoggedIn=!0,this.roles=this.storageService.getUser().roles)}onSubmit(){const{username:t,password:s,roleType:i}=this.form;"DRIVER"==i?this.router.navigate(["/mod"]):"CUSTOMER"==i&&this.router.navigate(["/user"]),this.authService.login(t,s).subscribe({next:r=>{console.log("data: "+r),this.storageService.saveUser(r),this.isLoginFailed=!1,this.isLoggedIn=!0,this.roles=this.storageService.getUser().roles,this.reloadPage()},error:r=>{this.errorMessage=r.error.message,this.isLoginFailed=!0}})}reloadPage(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.e),e.Y36(f.V),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"col-md-12"],[1,"card","card-container"],["id","profile-img","src","//ssl.gstatic.com/accounts/ui/avatar_2x.png",1,"profile-img-card"],["name","form","novalidate","",3,"ngSubmit",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","username"],["type","text","name","username","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","password"],["type","password","name","password","required","","minlength","3",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["password","ngModel"],[1,"btn","btn-primary","btn-block"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.YNc(3,M,19,11,"form",3),e.YNc(4,T,2,1,"div",4),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!s.isLoggedIn),e.xp6(1),e.Q6J("ngIf",s.isLoggedIn))},dependencies:[d.mk,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.wO,a.On,a.F],styles:["label[_ngcontent-%COMP%]{display:block;margin-top:10px}.card-container.card[_ngcontent-%COMP%]{max-width:400px!important;padding:40px}.card[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px 25px 30px;margin:50px auto 25px;border-radius:2px;box-shadow:0 2px 2px #0000004d}.profile-img-card[_ngcontent-%COMP%]{width:96px;height:96px;margin:0 auto 10px;display:block;border-radius:50%}"]}),n})()},{path:"register",component:(()=>{class n{constructor(t){this.authService=t,this.form={username:null,email:null,password:null},this.isSuccessful=!1,this.isSignUpFailed=!1,this.errorMessage=""}onSubmit(){const{username:t,email:s,password:i}=this.form;this.authService.register(t,s,i).subscribe({next:r=>{console.log(r),this.isSuccessful=!0,this.isSignUpFailed=!1},error:r=>{this.errorMessage=r.error.message,this.isSignUpFailed=!0}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],decls:5,vars:2,consts:[[1,"col-md-12"],[1,"card","card-container"],["id","profile-img","src","//ssl.gstatic.com/accounts/ui/avatar_2x.png",1,"profile-img-card"],["name","form","novalidate","",3,"ngSubmit",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","username"],["type","text","name","username","required","","minlength","3","maxlength","20",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","email"],["type","email","name","email","required","","email","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["email","ngModel"],["for","password"],["type","password","name","password","required","","minlength","3",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["password","ngModel"],[1,"btn","btn-primary","btn-block"],["class","alert alert-warning",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"alert","alert-warning"],[1,"alert","alert-success"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.YNc(3,Q,24,16,"form",3),e.YNc(4,Y,2,0,"div",4),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!s.isSuccessful),e.xp6(1),e.Q6J("ngIf",s.isSuccessful))},dependencies:[d.mk,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.on,a.On,a.F],styles:["label[_ngcontent-%COMP%]{display:block;margin-top:10px}.card-container.card[_ngcontent-%COMP%]{max-width:400px!important;padding:40px}.card[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px 25px 30px;margin:50px auto 25px;border-radius:2px;box-shadow:0 2px 2px #0000004d}.profile-img-card[_ngcontent-%COMP%]{width:96px;height:96px;margin:0 auto 10px;display:block;border-radius:50%}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(F),m.Bz]}),n})();var P=g(3144);let K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,O,a.u5,P.JF]}),n})()}}]);